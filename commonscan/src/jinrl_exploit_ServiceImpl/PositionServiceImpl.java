package jinrl_exploit_ServiceImpl;

import java.util.ArrayList;
import java.util.Iterator;
import java.util.List;

import jinrl_exploit_IService.IPositionService;
import jinrl_exploit_Po.Tposition;
import jinrl_exploit_Po.Tpositionuser;
import jinrl_exploit_Po.Tuser;
import jinrl_exploit_common.Tools;

public class PositionServiceImpl implements IPositionService {
	/**
	 * 获得当前用户的所有可用岗位
	 * @param user
	 * @return
	 */
	public List<Tposition> getPositionsByuser(Tuser user){
		if(!Tools.GetisusedValue(user)){return null;}
		//存放岗位集合
		List<Tposition> listp = new ArrayList<Tposition>();
		//遍历岗位人员表
		for(Iterator<Tpositionuser> it = user.getTpositionusers().iterator();it.hasNext();){
			Tpositionuser pu = it.next();
			if(Tools.GetisusedValue(pu)){
				Tposition p = pu.getTposition();
				if(Tools.GetisusedValue(p)){
					listp.add(p);
				}
			}
		}
		//现在得到了一个可用的岗位集合对象
		List<Tposition> l = Tools.removeDuplicatePosition(listp);
		return l;
	}
}
