package jinrl_exploit_ServiceImpl;

import java.util.ArrayList;
import java.util.List;

import jinrl_exploit_ICommonDao.ICommonDao;
import jinrl_exploit_IService.IDownloadService;
import jinrl_exploit_Po.Tdownload;

public class DownloadServiceImpl implements IDownloadService {
	ICommonDao commonDao;

	public void setCommonDao(ICommonDao commonDao) {
		this.commonDao = commonDao;
	}

	public List<Tdownload> findByName(String downloadname) {
		List<Tdownload> dl = (List<Tdownload>)commonDao.getData("from Tdownload dl where dl.fnameid='" + downloadname+"'");
		return dl;
	}

	@Override
	public List<Tdownload> findKindOfNameByInfoid(String infoid) {
		List<Tdownload> tl = commonDao.getData("from Tdownload dl where dl.finfoid='"+infoid+"'");
		List<Tdownload> dl = new ArrayList<Tdownload>();
		for(Tdownload d : tl){
			int k=0;
			for(int i=0;i<dl.size();i++){

				if(dl.get(i).getFname().equals(d.getFname())){
					//说明已经包含
					k=1;break;
				}

			}
			if(k==0){
				dl.add(d);
			}
		}
		return dl;
	}

	@Override
	public Tdownload findById(String dnameid) {
		Tdownload datab = null;
		try{
			datab = (Tdownload) commonDao.getData("from Tdownload dl where dl.fnameid='" + dnameid+"'").get(0);
		}catch(Exception e){
			e.printStackTrace();
		}
		return datab;
	}

}
